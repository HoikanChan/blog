---
title: HybridApp 实施细节
vssue-title: HybridApp 实施细节
date: 2019-09-02
tags:
  - 大前端
  - hybrid-app
categories: [大前端]
---
## hybrid整体框架

让产品 最好给 顶部navigation 和 底部 tabbar  分出来给原生，整个框架最好让原生去弄，h5 只做列表 和 列表进入  能控制在两级最好，h5只负责页面渲染 和  交互还有桥接  整体框架结构让原生去弄，权限控制h5 可以走桥接，通过桥接可以通知原生要隐藏什么

## 实施

第一步是先把 页面切割分配好哪些用H5实现，哪些用原生实现   

第二步是 跟原生确定好所有桥接 

这两个ok了 其他问题不大  H5弄好页面链条好了 就没啥事了  后面提交发布打包加固什么的都让原生去弄  H5只专注于业务和跟原生交互就可以了


桥接可以等原生过来  其实约定协议不需要太长时间  页面切割可以提前由产品人员先搞    刚才我已经建议了  给 顶部和底部分出来让原生去弄   页面一级和二级 H5自己跳转   

顶部右上角三个点菜单加入刷新 还可以加入其他快捷方式入口

## 升级


  安装包升级  由服务端跟原生去配合  做到后台   做成单独接口

## 首屏

开屏  或者 开屏广告位啥的  都让原生去做   这块的配置文件接口 都是原生跟服务端直接搞

 原生还是有一些直接跟服务端接口交互的东西  例如  开屏配置   例如安装包升级  另外原生还涉及到升级策略问题

其实开屏配置  投放位这些 都是算是云控接口    升级策略走升级接口   其实这块的策略还是看产品要怎么搞

比如产品说 开屏100年不变 那就不用搞

比如产品说  升级不需要提示和跳商店  那就不需要做升级接口

如果产品要做 强制更新 和 区间更新  那么就只要做一个复杂的配置升级后台  当然安卓涉及到渠道更新  因为每个市场算是一个渠道包

## 渠道数据

统计的渠道号 只能打到渠道包里  而且不同市场如果做推广 也需要做一些首发的包   比如做首发的话应用市场需要给你指定一个特殊的开屏 那个上面是有应用市场的logo的   这些配置或者安装包  都需要按照渠道分别打出 或者 分别控制的

## 微信登录

app的话  需要走微信open平台，需要app做拉起，交互触发 h5来做交互  桥接给原生进行微信拉起，原生回来之后的数据 通过桥接给H5   存储什么的H5来完成  需要本地存储的 再跟原生走桥接 原生调用本地storge

登录页H5，点击微信登录   H5通过桥接通知 原生，  原生做微信拉起，微信授权回来之后 原生再给授权后的结果通过桥接给H5

## 平台细节

###  ios

页面切割的时候考虑到ios过审，过审一定要有几个原生界面的，可以写死数据的都没事

另外IOS审核要求不能强制登录，IOS审核时，隐藏掉WebView之外 过审界面还要做成非强制登录的逻辑  

### 安卓

安卓 渠道包 渠道统计   埋点统计 这些都让原生走友盟

H5需要上报的  通过桥接通知原生就好


​    


​    









  







  









  




